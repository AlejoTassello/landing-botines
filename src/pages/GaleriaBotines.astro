---
import { botines } from "../data/botines.js";
import Header from "../components/Header.astro";
import SectionContainer from "../components/SectionContainer.astro";
---
<head>
  <meta charset="UTF-8" />
</head>
<main class="px-6">
  <Header  />

  <section class="py-12 bg-white">
    <div class="container mx-auto px-4">
      <h2 class="text-4xl font-bold text-center mb-12 text-gray-800">Botines Disponibles</h2>

      <!-- Buscador y Filtros -->
      <div class="flex flex-col md:flex-row justify-between items-center mb-8 space-y-4 md:space-y-0 md:space-x-4">
        <div class="w-full md:w-1/2 relative">
          <input 
            type="text" 
            id="buscador"
            placeholder="Buscar botines..." 
            class="w-full px-4 py-3 pl-10 pr-4 rounded-full border-2 border-gray-300 focus:border-black transition duration-300 sm:text-lg"
          />
          <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-gray-400 absolute left-3 top-1/2 transform -translate-y-1/2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
          </svg>
        </div>
        <select 
          id="filtro" 
          class="w-full md:w-auto px-4 py-3 rounded-full border-2 border-gray-300 focus:border-black transition duration-300 bg-white sm:text-lg"
        >
          <option value="">Todas las Categorías</option>
          <option value="Futbol">Fútbol</option>
          <option value="Futbol 5">Fútbol 5</option>
          <option value="Futsal">Futsal</option>
        </select>
      </div>

      <!-- Contenedor de Botines -->
      <div id="galeria" class="grid sm:grid-cols-1 lg:grid-cols-3 xl:grid-cols-4 gap-6">
        {botines.map((botin) => (
          <div class="bg-white rounded-2xl overflow-hidden shadow transform transition duration-300 hover:scale-105 
            max-w-[220px] sm:max-w-[250px] md:max-w-[280px] mx-auto w-full sm:w-auto sm:mb-4">
            
            <img src={botin.imagen} alt={`${botin.marca} ${botin.modelo}`} 
              class="w-full h-32 object-contain p-1 aspect-[5/3]" />
            
            <div class="p-1 sm:p-2">
              <h4 class="font-semibold text-xs sm:text-sm line-clamp-1">{botin.marca} {botin.modelo}</h4>
              <div class="flex justify-between items-center pt-1 sm:pt-2">
                <p class="font-semibold text-gray-500 text-xs sm:text-sm">{botin.categoria}</p>
                <h5 class="font-semibold text-xs sm:text-sm">${botin.precio}.000</h5>
              </div>
              <p class="py-1 font-medium text-gray-400 text-xs sm:text-sm">Talle: {botin.talle}</p>
            </div>
          </div>
        ))}
      </div>
      
      


      <!-- Paginación -->
      <div class="flex justify-center mt-12" id="paginacion"></div>
    </div>
  </section>
</main>

<script>
import { botines } from "../data/botines";

document.addEventListener("DOMContentLoaded", () => {
  const botinesList = [...botines];
  let searchTerm = "";
  let filterCategory = "";
  let currentPage = 1;
  const itemsPerPage = 12;

  const buscador = document.getElementById("buscador");
  const filtro = document.getElementById("filtro");
  const galeria = document.getElementById("galeria");
  const paginacion = document.getElementById("paginacion");

  function renderBotines() {
    let botinesFiltrados = botinesList
      .filter((botin) => 
        botin.marca.toLowerCase().includes(searchTerm.toLowerCase()) ||
        botin.modelo.toLowerCase().includes(searchTerm.toLowerCase()) ||
        botin.categoria.toLowerCase().includes(searchTerm.toLowerCase())
      )
      .filter((botin) => (filterCategory ? botin.categoria === filterCategory : true));

    const totalPages = Math.ceil(botinesFiltrados.length / itemsPerPage);
    currentPage = Math.min(currentPage, totalPages);
    const inicio = (currentPage - 1) * itemsPerPage;
    const botinesPaginados = botinesFiltrados.slice(inicio, inicio + itemsPerPage);

    // Renderiza los botines
    if (galeria) {
  galeria.innerHTML = botinesPaginados
    .map((botin) => `
      <div class="bg-white rounded-2xl overflow-hidden shadow transform transition duration-300 hover:scale-105 
        w-full sm:max-w-sm lg:max-w-md mx-auto sm:mb-4">
        
        <img src="${botin.imagen}" alt="${botin.marca} ${botin.modelo}" 
          class="w-full h-52 lg:h-64 object-contain p-2 aspect-[5/3]" />

        <div class="p-4">
          <h4 class="font-semibold text-sm sm:text-base lg:text-lg line-clamp-1">${botin.marca} ${botin.modelo}</h4>
          <div class="flex justify-between items-center pt-1 sm:pt-2">
            <p class="font-semibold text-gray-500 text-sm sm:text-base lg:text-lg">${botin.categoria}</p>
            <h5 class="font-semibold text-sm sm:text-base lg:text-lg">$${botin.precio}.000</h5>
          </div>
          <p class="py-1 font-medium text-gray-400 text-sm sm:text-base lg:text-lg">Talle: ${botin.talle}</p>
        </div>
      </div>
    `)
    .join("");
}





    // Renderiza la paginación
    if (paginacion) {
      paginacion.innerHTML = "";
      for (let i = 1; i <= totalPages; i++) {
        const button = document.createElement("button");
        button.innerText = i.toString();
        button.className = `px-5 py-3 mx-1 rounded-full sm:text-lg sm:px-6 sm:py-4 ${
          currentPage === i
            ? "bg-black text-white"
            : "bg-gray-200 text-black hover:bg-black hover:text-white"
        } transition duration-300`;
        button.onclick = () => {
          currentPage = i;
          renderBotines();
        };
        paginacion.appendChild(button);
      }
    }
  }

  // Listeners para búsqueda y filtros
  if (buscador) {
    buscador.addEventListener("input", (e) => {
      const target = e.target;
      if (target) {
        searchTerm = (target as HTMLInputElement).value;
      }
      currentPage = 1;
      renderBotines();
    });
  }

  if (filtro) {
    filtro.addEventListener("change", (e) => {
      const target = e.target;
      if (target) {
        filterCategory = (target as HTMLSelectElement).value;
        currentPage = 1;
        renderBotines();
      }
    });
  }

  renderBotines();
});
</script>







